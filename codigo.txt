// pelicula.h
#include <iostream>
#include <string>
#include "persona.h"

class pelicula {
private:
    // atrib
    static int autonumerico;
    int codigo;
    std::string titulo;
    // std::string director; //objeto persona
    Persona director; //objeto persona
    bool estreno;
    float precioBase;
    std::string tipoPelicula;

public:

    // Constructor defecto
    //clase pelicula
    // clase persona por defecto
    pelicula(){
        codigo = autonumerico++; //código 000
        titulo = "Sin título";
        director = Persona("director", "biografia", 0);
        estreno = false;
        precioBase = 0.0;
        tipoPelicula = "N";
    }

    // Constructor parámetros
    pelicula(int codigo, std::string titulo, Persona director, bool estreno, float precioBase, std::string tipoPelicula)
        : codigo(codigo), titulo(titulo), director(director), estreno(estreno), precioBase(precioBase), tipoPelicula(tipoPelicula) {
        autonumerico++;
    }

    // Constructor copia
    pelicula(const pelicula& otraPelicula) {
        codigo = autonumerico++;
        titulo = otraPelicula.titulo;
        director = otraPelicula.director;
        estreno = otraPelicula.estreno;
        precioBase = otraPelicula.precioBase;
        tipoPelicula = otraPelicula.tipoPelicula;
    }

    // // metodo
    // void listarInformacion() {
    //     std::cout << "Código: " << codigo << std::endl;
    //     std::cout << "Título: " << titulo << std::endl;
    //     std::cout << "Director: " << director << std::endl;
    //     std::cout << "Estreno: " << (estreno ? "Sí" : "No") << std::endl;
    //     std::cout << "Precio Base: " << precioBase << std::endl;
    //     std::cout << "Tipo Película: " << tipoPelicula << std::endl;
    // }

    // metodo
    float calcularCosto() {
        float costo = precioBase;
        if (tipoPelicula == "I") {
            costo *= 1.30;
        } else if (!estreno) {
            costo *= 0.8;
        }
        return costo;
    }

    std::string getBiografiaDirector() {
        // nombre, bio, edad
        return director.GetNombre() + ": " + director.GetBiografia() + " (Edad: " + std::to_string(director.GetEdad()) + ")";
    }
};

// persona.h
#ifndef PERSONA_H // en que caso usa encab
#define PERSONA_H //?
#include <iostream>
#include <string>

class Persona {
private:
    std::string nombre;
    std::string biografia;
    int edad;

public:
    // constr def, 
    Persona(){
        nombre = "agregar";
        biografia = "agregar";
        edad = 0;
    }

    // Constructor param inic datos
    Persona(const std::string& nombre, const std::string& biografia, int edad) 
        : nombre(nombre), biografia(biografia), edad(edad) {}

    // obt nom
    std::string GetNombre() const {
        return nombre;
    }

    // obt bio
    std::string GetBiografia() const {
        return biografia;
    }

    // obt edad
    int GetEdad() const {
        return edad;
    }

};

#endif // PERSONA_H


// programa.cpp
#include <iostream>
#include <string>
#include "persona.h"
#include "pelicula.h"

int pelicula::autonumerico=1;

int main() {
    // instanc Persona directores
    Persona director1("nomDirec1", "Biografia del Director ...", 40);
    Persona director2("nomDirec2", "Biografia del Director ...", 50);

    // instanc Pelicula con directores
    pelicula pelicula1(1, "nomPelic1", director1, true, 100.0, "I");
    pelicula pelicula2(2, "nomPelic2", director2, false, 50.0, "N");

    // mostrar
    std::cout << "Biografia del Director de la Pelicula 1: " << pelicula1.getBiografiaDirector() << std::endl;
    std::cout << "Biografia del Director de la Pelicula 2: " << pelicula2.getBiografiaDirector() << std::endl;

    return 0;
}
